<!DOCTYPE html>
<html lang="en">
    
    <title>Hello Scholar!</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="css/common/w3.css">
    <link rel="stylesheet" href="css/common/font_poppins.css">
    <link rel="stylesheet" href="css/common/core.css">
        <link rel="stylesheet" href="css/common/userimg.css">

    <link rel="stylesheet" href="css/documents/fileviewer.css">

    <script src="js/documents/pdfobject.min.js"></script>
    <script src="js/documents/pdfobject.js"></script>

    <style>
        body,h1,h2,h3,h4,h5 {   font-family: "Poppins", sans-serif    }
        body {    font-size:16px;    }
        .w3-half img{
            margin-bottom:-6px;
            margin-top:16px;
            opacity:0.8;
            cursor:pointer
        }
        .w3-half img:hover{ opacity:1 }

        .pdfobject-container { height: 30rem; border: 1rem solid rgba(0,0,0,0.1); }

        .custombtn {
            background-color: #f44336; /* Green */
            border: none;
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
        }

    </style>

    <script>
        function logout() {
            var login_uid = document.getElementById("hidfld_uid").value
            var xmlhttp = new XMLHttpRequest();
                route = "service/php/web/common/logout.php?uid=" + login_uid;
                xmlhttp.open("GET", route, true);
                xmlhttp.send();
                xmlhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) { console.log(this.responseText);
                        //alert(this.responseText + " " + login_uid);
                        // **below is template: json formatted
                        let d;
                        try { d = JSON.parse(this.responseText); }
                        catch (e) { alert('Response Format error! ' + this.responseText); return; }
                        if (d.success == false) { alert(d.message); return; } //console.log(d.success);
                        window.location.href = "index.html";
                    }
                    else if (this.readyState == 4) {
                        alert("Server Unreachable. Possible Slow Internet Connection..!");
                    }
                };
        }
    </script>

    <body>

    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-red w3-collapse w3-top w3-large w3-padding" style="z-index:3;width:300px;font-weight:bold;" id="mySidebar"><br>
    <a href="javascript:void(0)" onclick="w3_close()" class="w3-button w3-hide-large w3-display-topleft" style="width:100%;font-size:22px">Close Menu</a>
    <div class="w3-container">
        <div class="image-cropper w3-margin-bottom" style="margin: auto auto auto 60px;">
            <img class="rounded" id="imgPhoto" style="margin: auto;" src="images/register/photoplaceholder.jpg" height="100" width="100">
        </div>
        <h3 id="lblScholarName" style="width: 225px; white-space: nowrap; 
            overflow: hidden; text-overflow: ellipsis; text-align: center;">
            Scholar-User-Name-Here
        </h3>
    </div>
    <div class="w3-bar-block" style="margin-top: 50px">
        <a href="home.html" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Application Progress</a> 
        <a href="applist.html" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Application List</a> 
        <a href="newapp.html" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">New Application</a> 
        <a href="#" onclick="w3_close()" class="w3-bar-item w3-button w3-white">Uploaded Documents</a> 
        <a href="profile.html" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Profile</a> 
        <a onclick="logout(); w3_close()" class="w3-bar-item w3-button w3-hover-white">Logout</a>
    </div>
    </nav>

    <!-- Top menu on small screens -->
    <header class="w3-container w3-top w3-hide-large w3-red w3-xlarge w3-padding">
    <a href="javascript:void(0)" class="w3-button w3-red w3-margin-right" onclick="w3_open()">â˜°</a>
    <span>Scholar Help</span>
    </header>

    <!-- Overlay effect when opening sidebar on small screens -->
    <div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

    <!-- !PAGE CONTENT! -->
    <div class="w3-main" style="margin-left:340px;margin-right:40px">

        <!-- Header -->
        <div class="w3-container" style="margin-top:40px" id="showcase">
            <h1 class="w3-xxxlarge w3-text-red"><b>Your uploaded files.</b></h1>
            <div style="display: flex;">
                <hr style="width:50px;border:5px solid red; margin-right: 10px;" class="w3-round">
                <h3 id="lblTotalFiles">you have ? of uploaded documents and photos.</h3>
            </div>            
        </div>

        <!-- scholarship application list -->
        <div class="w3-panel" style="overflow: auto; height: 330px; width: 97%;">
            <table class="w3-table w3-striped w3-red" style="width: 1000px; font-weight: bolder; table-layout: fixed;">
                <tr>
                    <td class="tdbasic">APPLICATION TITLE</td>
                    <td class="tdbasic">FILE NAME</td>
                    <td class="tdbasic">STATUS</td>
                    <td class="tdbasic">DATE UPDATED</td>
                    <td class="tdbasic">TYPE</td>
                </tr>
            </table>
            <table id="tblscholardocs" class="w3-table w3-striped w3-white" style="width: 1000px; table-layout: fixed;">
                <h2 id="lblLoadingRecords" class="w3-text-red">Checking for Uploaded Documents...</h2>                
            </table>
        </div>

        <div class="form__group field" style="margin-left: 15px; margin-top: -5px;">
            <input type="input" class="form__field" style="color: black" placeholder="type_filter" 
                name="inpsearch" id='inpsearch' required onkeyup="tblSearch(this, document.getElementById('tblscholardocs'))"/>
            <label for="inpsearch" class="form__label">Type File Name to Filter Search</label>
        </div>

    <!-- End page content -->
    </div>


    <div id="mdl_fileViewer" class="modal">
        <div class="modal-content" id="mdl_case"> <!-- Modal content -->
            <div style="border: 1px white solid;">            
                <span class="close">&times;</span>
                <p id="mdl_filename" style="text-align: center;">PDF File Title Here</p>
            </div>
            <div id="pdfviewer_area" style="display: none;"></div>
            <img id="imgviewer_area" style="display: none; width: 500px; height: 390px; margin: auto;">
            <div id="imgviewer_controls" style="display:none; width: 100%; margin-top: 20px;">
                <a id="imgviewer_download" class="custombtn" style="margin: auto; width: 40%; cursor: pointer" download>Download</a>
                <a id="imgviewer_print" class="custombtn" style="margin: auto; width: 40%;" href="#">Print</a>
            </div>

        </div>
    </div>

    <input type="hidden" id="hidfld_uid" name="hidfld_uid" value="?">
    <input type="hidden" id="hidfld_fname" name="hidfld_fname" value="?">

    <script src="js/documents/core.js"></script>
    <script src="js/documents/controls.js"></script>
    <script>
        var uploadfileTimer;
        
        window.onload = init();
        window.onload = start_uploadFileTime();
    </script>

    </body>
</html>
